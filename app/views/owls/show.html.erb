<% content_for :body_class, "owl-show-page" %>

<h1>🦉<%= @owl.name %>プロフィール🦉</h1>

<div class="owl-profile">
  <div class="profile-card">
    <h2><%= @owl.name %></h2>

    <div class="profile-details">
      <p><strong>🦉 種類:</strong> <%= @owl.species %></p>
      <p><strong>🎂 年齢:</strong> <%= @owl.age %>歳</p>
      <p><strong>🏠 住んでいる場所:</strong> <%= @owl.habitat %></p>
      <div>
        <p><strong>📝 自己紹介:</strong></p>
        <p>Hello World。知識の森の梟🦉フクちゃんだよ‼</p>
        <p>こんなところまでわざわざありがとうホゥ～❣ この森のことは少しは分かってもらえたかホ～？</p>
        <p>みんなの学習の助けになれるように、もっともっと勉強して冬支度(準備)しなくちゃっホゥ～</p>
      </div>
    </div>

    <div class="owl-messages">
      <h3>📢 開発者メッセージ（2025年10月15日）</h3>

      <div class="message-box">
        <p>こんにちは！72期生のふくちゃんです。入学してからもう2カ月が経ちましたね。</p>
        <p>皆さん、学習は順調でしょうか？私はというと...とっても雲行きが怪しいです😅</p>
        <p>中間試験を前に頭が凝り固まってしまったので、リフレッシュをかねてアプリ開発に挑戦してみました。</p>

        <p>今回の制作は、初めての個人開発として「形にして出してみる」ことを目標にしています。</p>
        <p>まだ主要な機能は一部しか実装できていませんが、全体の構想と世界観を感じてもらえたらうれしいです。</p>

        <p>このアプリで目指したのは、これまで自分が学習の中でつまずいたことや気づいたことを、</p>
        <p>後輩たちにも伝えられる場所を作ることでした。</p>
        <p>梟🦉の<%= @owl.name %>は、受講生の学びを言葉にして届ける存在として登場します。</p>
        <p>エラーや悩みに直面したときに、そっとアドバイスをくれるキャラクターです。</p>

        <p>今後は、他の受講生の方々からも“こんな時にこんなアドバイスが欲しかった”という声を集めて、</p>
        <p>アップデートを重ねていきたいと考えています。</p>

        <p>裏話ですが、このアプリを作ることで自分自身の学習を振り返るきっかけにもなりました。</p>
        <p>何より、自分の経験を人の役に立てられると思うと、自然と開発意欲が上がりました。</p>

        <p>私はまず、自分の分身として梟🦉の<%= @owl.name %>を登場させると決めました。</p>
        <p>ここからが本格的な試行錯誤の始まりです。世界観の方向性を決める際にかなり悩んでしまいました。</p>
        <p>最初に浮かんだのが「分身（生まれ変わり）」というテーマから、『ポケモン不思議のダンジョン 赤の救助隊』でした。</p>
        <p>あの世界で主人公が目覚めて語り始める表現がとても印象的で、自分のアプリでも物語のような導入を再現したいと思いました。</p>

        <p>ただ、自然の雰囲気を表現するのは難しく悩んでいたところ、『ワンピース』のシャボンディ諸島を思い出しました。</p>
        <p>「巨大な木」と「シャボン玉」のイメージが気に入って、イラストを巨大樹にして掲示板風にアレンジしています。</p>

        <p>本当は問題アドバイスボタン（現在は1つのみ）をシャボン玉風にしたかったのですが、表現が難しく今回は見送りました。</p>

        <p>このアプリを作るきっかけの一つには、らんてくんの存在もあります。</p>
        <p>らんてくん達とは少し違った形で、学習を支えるアプリを作れないかという思いが出発点でした。</p>

        <p>この森にらんてくんとロボらんてくんが遊びに来る設定も面白そうだなと思い、頭の中でいろいろ想像していました。</p>
        <p>ロボらんてくん（「ここが噂の恐怖の森か…」）<br>
        らんてくん（「違う違う、知識の森だよ！」）<br>
        みたいな会話から始まる構想です（笑）</p>

        <p>このページはまだ仮段階のものなので、一部の挙動に不具合があります。</p>
        <p>マウスの戻るボタンを押すと問題アドバイスボタンが反応しなくなったり、「一覧に戻る」を押すと最初からになったりします。</p>

        <p>また、ちょっとした遊び心として“隠し要素”も入れています。</p>
        <p>掲示板表示から10秒後以降にフクちゃんをクリックすると、微笑んでくれます🦉</p>

        <p>ぜひ最下部「一覧に戻る」ボタンを押して物語を再生、skipボタンを探してみてください。【ヒント：黒板右下に注目🧐】</p>
      </div>

      <div class="message-box">
        <p>※今後、皆様からいただいたご提案や学習アイデアに基づくアップデートの際は、一時的にページを非公開とする場合があります。</p>
        <p>その際は、あたたかく見守っていただけたらうれしいです。</p>
      </div>

      <div class="message-box">
        <p><strong>制作を通しての学び</strong></p>

        <p>当初はRenderへのデプロイすらうまくいかず、出来たと思ったのもつかの間、CSSが反映されず、</p>
        <p>DBのデータが空になるといった問題に悩まされました。</p>
        <p>環境設定を何度も見直しても改善せず、混乱する中で一度冷静にデベロッパーツールを確認したところ、</p>
        <p>生成されたCSS自体は正しく読み込まれていることに気づきました。</p>

        <p>その後、<code>RAILS_ENV=production rails assets:precompile</code> を実行して本番環境用のアセットを生成し、環境設定を修正。</p>
        <p>原因はファイル構成と環境指定の不整合にあると分かりました。</p>

        <p>また、RenderのFreeプランではShellアクセスが制限されていたため、</p>
        <p><code>db/seeds.rb</code> に一時的にテストデータを追加して動作確認を行いました。</p>
        <p>その際、<code>Owl.find_or_create_by(name: "フクちゃん")</code> とテスト用の2件が生成されたため、</p>
        <p>一度 <code>Owl.destroy_all</code> を実行して不要なテストデータを削除。目的のデータだけを残して安定動作を確認しました。</p>

        <p>この経験を通して、焦って環境を変更する前に状況を観察し、原因を切り分けることの大切さを学びました。</p>
        <p>今後は構成を整理し、再現性のあるデプロイ手順を意識して進めていきたいです。</p>

        <p>この経験を通して、開発とは単にコードを書くことではなく、問題を観察しながら一歩ずつ解決していく過程そのものだと感じました。</p>
      </div>

      <div class="message-box">
        <p>これからも一緒に成長して、素晴らしいエンジニアを目指していきましょう!!</p>
      </div>
    </div>

    <div class="action-buttons">
      <%= link_to "一覧に戻る", owls_path, class: "btn btn-secondary" %>
    </div>

    <!-- ❄️ プロフィールBGM -->
    <div class="bgm-controls"
          data-controller="bgm-show"
          data-bgm-path="<%= asset_path('snow_ambient.mp3') %>">
      <button data-bgm-show-target="toggleButton"
              data-action="click->bgm-show#toggle"
              class="bgm-btn">
        BGM停止
      </button>
    </div>
  </div>
</div>