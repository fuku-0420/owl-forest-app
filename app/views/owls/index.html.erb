<div
  class="classroom-container"
  data-controller="owl coming-soon"
  data-owl-categories-value="<%= json_escape(@categories_json.to_json) %>"
  data-owl-signed-in-value="<%= user_signed_in? %>"
  data-owl-favorite-ids-value="<%= json_escape(@favorite_ids.to_json) %>"
>
  <!-- ğŸŒ³ æ£®ã®èƒŒæ™¯ -->
  <img
    src="<%= asset_path('tisikinomori.png') %>"
    alt="æ£®ã®èƒŒæ™¯"
    class="forest-bg"
    data-owl-target="forest"
    data-summer-image="<%= asset_path('tisikinomori.png') %>"
    data-autumn-image="<%= asset_path('tisikinomori_aki.png') %>"
  >

  <!-- ğŸš§ Î²ç‰ˆãƒãƒŠãƒ¼ -->
  <div class="dev-banner">
    ğŸš§ ç¾åœ¨Î²ç‰ˆï¼ˆé–‹ç™ºä¸­ï¼‰ã§ã™ã€‚ãƒ‡ãƒ¼ã‚¿ã¯äºˆå‘Šãªãå‰Šé™¤ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚
  </div>

  <!-- ğŸ“ é»’æ¿ -->
  <div class="blackboard" data-owl-target="blackboard">
    <button
      class="chalk-text-button"
      data-owl-target="click"
      data-action="click->owl#enterForest"
    >
      <span class="typing-text" data-owl-target="typingText"></span>
    </button>
  </div>

  <!-- ğŸ¦‰ ãƒ•ã‚¯ã¡ã‚ƒã‚“ -->
  <img
    src="<%= asset_path('fukuchan.png') %>"
    alt="ãƒ•ã‚¯ã¡ã‚ƒã‚“"
    class="fukuchan-global"
    data-owl-target="fukuchan"
    data-happy-image="<%= asset_path('fukuchan-happy.png') %>"
    data-normal-image="<%= asset_path('fukuchan.png') %>"
  >

  <!-- â° ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ™‚è¨ˆ -->
  <div data-controller="clock">
    <div
      id="current-time"
      class="clock-display"
      data-clock-target="display"
    ></div>
  </div>

  <!-- ğŸµ BGM -->
  <div
    class="bgm-controls"
    data-controller="bgm"
    data-bgm-path="<%= asset_path('forest_ambient.mp3') %>"
  >
    <button
      data-bgm-target="toggleButton"
      data-action="click->bgm#toggle"
      class="bgm-btn"
    >
      æ£®ã®BGM
    </button>

    <input
      type="range"
      data-bgm-target="volumeSlider"
      data-action="input->bgm#adjustVolume"
      min="0"
      max="0.3"
      step="0.01"
      value="0.15"
      class="volume-slider"
    >
  </div>

  <!-- ğŸ¦‰ ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚«ãƒ¼ãƒ‰ä¸€è¦§ -->
  <div class="owls-container" style="display: none;">
    <% @owls.each_with_index do |owl, index| %>
      <div
        class="owl-card owl-menu-card"
        data-owl-target="owlCard"
        data-owl-index="<%= index %>"
        data-action="mouseenter->owl#hoverOwl mouseleave->owl#leaveOwl"
      >
        <!-- ğŸ‘¤ ãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ ãƒŸãƒ‹ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ« -->
        <% if user_signed_in? %>
          <% profile = current_user.profile %>

          <%= link_to profile_path, class: "user-mini-profile user-mini-profile--link" do %>
            <div class="user-mini-profile__avatar">
              <% if profile&.avatar&.attached? %>
                <%= image_tag profile.avatar, class: "user-mini-profile__img" %>
              <% else %>
                <div class="user-mini-profile__placeholder">
                  <span aria-hidden="true">ğŸ‘¤</span>
                </div>
              <% end %>
            </div>

            <div class="user-mini-profile__text">
              <div class="user-mini-profile__name">
                <%= profile&.display_name.presence || current_user.email.split("@").first %>
              </div>

              <% if profile&.bio.present? %>
                <div class="user-mini-profile__bio">
                  <%= profile.bio %>
                </div>
              <% end %>
            </div>
          <% end %>
        <% end %>

        <!-- ğŸ“‹ ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼ˆé€šå¸¸ï¼šãƒªãƒ³ã‚¯é‹ç”¨ï¼‰ -->
        <div class="owl-menu">
          <%= link_to "ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®š", settings_path, class: "owl-menu-btn" %>
          <%= link_to "ãŠæ°—ã«å…¥ã‚Š", favorites_path, class: "owl-menu-btn" %>
          <%= link_to "ã‚¢ãƒ‰ãƒã‚¤ã‚¹æ¡ˆå‹Ÿé›†", new_advice_suggestion_path, class: "owl-menu-btn" %>
          <%= link_to "æŠ•ç¨¿ä¸€è¦§", advice_suggestions_path, class: "owl-menu-btn" %>
          <%= link_to "ã‚¢ãƒ—ãƒªè¨­å®š", app_settings_path, class: "owl-menu-btn" %>
        </div>

        <!--
        ==============================
        ğŸš§ é–‹ç™ºä¸­ã‚¢ãƒ©ãƒ¼ãƒˆç”¨ï¼ˆcoming-soonï¼‰
        ==============================

        <div class="owl-menu">
          <button
            type="button"
            class="owl-menu-btn"
            data-action="click->coming-soon#comingSoon"
            data-feature="ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®š"
          >
            ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®š
          </button>

          <button
            type="button"
            class="owl-menu-btn"
            data-action="click->coming-soon#comingSoon"
            data-feature="ãŠæ°—ã«å…¥ã‚Š"
          >
            ãŠæ°—ã«å…¥ã‚Š
          </button>

          <button
            type="button"
            class="owl-menu-btn"
            data-action="click->coming-soon#comingSoon"
            data-feature="ã‚¢ãƒ‰ãƒã‚¤ã‚¹æ¡ˆå‹Ÿé›†"
          >
            ã‚¢ãƒ‰ãƒã‚¤ã‚¹æ¡ˆå‹Ÿé›†
          </button>

          <button
            type="button"
            class="owl-menu-btn"
            data-action="click->coming-soon#comingSoon"
            data-feature="æŠ•ç¨¿ä¸€è¦§"
          >
            æŠ•ç¨¿ä¸€è¦§
          </button>

          <button
            type="button"
            class="owl-menu-btn"
            data-action="click->coming-soon#comingSoon"
            data-feature="ã‚¢ãƒ—ãƒªè¨­å®š"
          >
            ã‚¢ãƒ—ãƒªè¨­å®š
          </button>
        </div>
        -->

        <!-- ğŸ’¬ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
        <div class="owl-message">
          <div
            class="message-line"
            data-message="<%= "ã“ã‚“ã«ã¡ã¯ï¼åƒ•ã¯æ¢ŸğŸ¦‰ã®#{owl.name}" %>"
          ></div>
          <div
            class="message-line"
            data-message="æ²¢å±±ã®äººã‚’ç¬‘é¡”ã«ã™ã‚‹ã®ãŒä»•äº‹ã ãƒ›ã‚¦ã€œâ˜†å½¡"
          ></div>
        </div>

        <%= link_to "è©³ã—ãè¦‹ã‚‹", owl_path(owl), class: "owl-menu-btn primary" %>
      </div>
    <% end %>
  </div>
</div>
