<div class="page-container submissions-page">
  <div class="page-header">
    <h1>投稿一覧</h1>
  </div>

  <div class="page-body">
    <% if notice.present? %>
      <p class="notice"><%= notice %></p>
    <% end %>

    <div class="submissions-board">
      <!-- 承認待ち -->
      <section class="submissions-section">
        <h2>承認待ち（<%= @pending.count %>件）</h2>

        <% if @pending.any? %>
          <div class="submissions-list">
            <% @pending.each do |s| %>
              <%= link_to advice_suggestion_path(s), class: "submission-card pending" do %>
                <div class="submission-meta">
                  <div class="submission-meta-left">
                    <span class="status-badge pending">承認待ち</span>
                    <span class="category"><%= s.category.name %></span>
                  </div>
                  <span class="author"><%= s.user.display_name_or_email %></span>
                </div>

                <p class="submission-body"><%= s.body.truncate(80) %></p>
              <% end %>
            <% end %>
          </div>
        <% else %>
          <p class="empty">承認待ちはありません。</p>
        <% end %>
      </section>

      <!-- 承認済み -->
      <section class="submissions-section">
        <h2>承認済み（<%= @approved.count %>件）</h2>

        <% if @approved.any? %>
          <div class="submissions-list">
            <% @approved.each do |s| %>
              <%= link_to advice_suggestion_path(s), class: "submission-card approved" do %>
                <div class="submission-meta">
                  <div class="submission-meta-left">
                    <span class="status-badge approved">承認済み</span>
                    <span class="category"><%= s.category.name %></span>
                  </div>
                  <span class="author"><%= s.user.display_name_or_email %></span>
                </div>

                <p class="submission-body"><%= s.body.truncate(80) %></p>
              <% end %>
            <% end %>
          </div>
        <% else %>
          <p class="empty">承認済みはありません。</p>
        <% end %>
      </section>

      <!-- 非承認 -->
      <section class="submissions-section">
        <h2>非承認（<%= @rejected.count %>件）</h2>

        <% if @rejected.any? %>
          <div class="submissions-list">
            <% @rejected.each do |s| %>
              <%= link_to advice_suggestion_path(s), class: "submission-card rejected" do %>
                <div class="submission-meta">
                  <div class="submission-meta-left">
                    <span class="status-badge rejected">非承認</span>
                    <span class="category"><%= s.category.name %></span>
                  </div>
                  <span class="author"><%= s.user.display_name_or_email %></span>
                </div>

                <p class="submission-body"><%= s.body.truncate(80) %></p>
              <% end %>
            <% end %>
          </div>
        <% else %>
          <p class="empty">非承認はありません。</p>
        <% end %>
      </section>
    </div>

    <div class="submissions-actions">
      <%= link_to "新しく投稿する", new_advice_suggestion_path, class: "primary-btn" %>
    </div>
  </div>
</div>

<%= render "shared/back_to_board" %>
